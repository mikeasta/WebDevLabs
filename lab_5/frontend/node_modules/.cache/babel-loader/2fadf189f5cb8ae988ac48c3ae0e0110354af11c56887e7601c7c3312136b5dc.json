{"ast":null,"code":"var _jsxFileName = \"/home/mikeasta/Programming/WebDevLabs/lab_5/frontend/src/components/info-table/InfoTable.js\";\nimport React from \"react\";\nimport { Table, Pagination } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass InfoTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      pageSize: this.props.pageSize || 10\n    };\n    this.pagination = [];\n  }\n  changePage(page) {\n    var _this$props$items;\n    if (page <= 0 || page > Math.ceil((((_this$props$items = this.props.items) === null || _this$props$items === void 0 ? void 0 : _this$props$items.length) || 0) / this.state.pageSize)) return;\n    this.setState({\n      page: page\n    });\n  }\n  updatePagination() {\n    var _this$props$items2;\n    this.pagination.length = 0;\n    const pagesCount = Math.ceil((((_this$props$items2 = this.props.items) === null || _this$props$items2 === void 0 ? void 0 : _this$props$items2.length) || 0) / this.state.pageSize);\n    if (!pagesCount) return;\n    const visibleRadius = 1;\n    const from = this.state.page - visibleRadius >= 2 ? this.state.page - visibleRadius - 1 : 1;\n    const to = this.state.page + visibleRadius < pagesCount - 1 ? this.state.page + visibleRadius - 1 : pagesCount - 2;\n    this.pagination.push( /*#__PURE__*/_jsxDEV(Pagination.Prev, {\n      onClick: () => this.changePage(this.state.page - 1)\n    }, \"pagination-prev\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }, this));\n    if (pagesCount > 0) this.pagination.push(this.getPaginationItem(0));\n    if (from > 1) this.pagination.push( /*#__PURE__*/_jsxDEV(Pagination.Ellipsis, {}, \"pagination-before\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }, this));\n    for (let i = from; i <= to; ++i) {\n      this.pagination.push(this.getPaginationItem(i));\n    }\n    if (pagesCount - to - 1 > 1) this.pagination.push( /*#__PURE__*/_jsxDEV(Pagination.Ellipsis, {}, \"pagination-after\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }, this));\n    if (pagesCount > 1) this.pagination.push(this.getPaginationItem(pagesCount - 1.0));\n    this.pagination.push( /*#__PURE__*/_jsxDEV(Pagination.Next, {\n      onClick: () => this.changePage(this.state.page + 1)\n    }, \"pagination-next\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 4\n    }, this));\n  }\n  getPaginationItem(page) {\n    return /*#__PURE__*/_jsxDEV(Pagination.Item, {\n      active: page + 1 === this.state.page,\n      onClick: () => this.changePage(page + 1),\n      children: page + 1\n    }, page + 1, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 4\n    }, this);\n  }\n  render() {\n    var _this$props$headers, _this$props$items3, _this$props$items4;\n    this.updatePagination();\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Table, {\n        striped: true,\n        bordered: true,\n        responsive: true,\n        className: \"mt-3\",\n        children: [(_this$props$headers = this.props.headers) !== null && _this$props$headers !== void 0 && _this$props$headers.length ? /*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"#\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 9\n            }, this), this.props.headers.map(header => /*#__PURE__*/_jsxDEV(\"th\", {\n              children: header.label\n            }, header.label, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 43\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 7\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [!((_this$props$items3 = this.props.items) !== null && _this$props$items3 !== void 0 && _this$props$items3.length) ? /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: this.props.headers.length + 1,\n              className: \"text-center\",\n              children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 9\n          }, this) : null, (_this$props$items4 = this.props.items) === null || _this$props$items4 === void 0 ? void 0 : _this$props$items4.filter((_, index) => {\n            return index >= (this.state.page - 1) * this.state.pageSize && index < this.state.page * this.state.pageSize;\n          }).map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: (this.state.page - 1) * this.state.pageSize + index + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 10\n            }, this), this.props.headers.map(header => /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item[header.name]\n            }, `td-${index + 1}-${header.name}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 11\n            }, this))]\n          }, `tr-${index + 1}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 9\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n        children: this.pagination\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true);\n  }\n}\n;\nexport default InfoTable;","map":{"version":3,"names":["React","Table","Pagination","InfoTable","Component","constructor","props","state","page","pageSize","pagination","changePage","Math","ceil","items","length","setState","updatePagination","pagesCount","visibleRadius","from","to","push","getPaginationItem","i","render","headers","map","header","label","filter","_","index","item","name"],"sources":["/home/mikeasta/Programming/WebDevLabs/lab_5/frontend/src/components/info-table/InfoTable.js"],"sourcesContent":["import React from \"react\";\nimport { Table, Pagination } from \"react-bootstrap\";\n\nclass InfoTable extends React.Component\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpage: 1,\n\t\t\tpageSize: this.props.pageSize || 10\n\t\t}\n\t\tthis.pagination = [];\n\t}\n\n\tchangePage(page)\n\t{\n\t\tif (page <= 0 || page > Math.ceil((this.props.items?.length || 0) / this.state.pageSize))\n\t\t\treturn;\n\t\tthis.setState({page: page});\n\t}\n\n\tupdatePagination()\n\t{\n\t\tthis.pagination.length = 0;\n\t\tconst pagesCount = Math.ceil((this.props.items?.length || 0) / this.state.pageSize);\n\t\tif (!pagesCount)\n\t\t\treturn;\n\n\t\tconst visibleRadius = 1;\t\t\n\n\t\tconst from\t= (this.state.page - visibleRadius) >= 2 ? \n\t\t\tthis.state.page - visibleRadius - 1 : 1;\n\t\tconst to\t= (this.state.page + visibleRadius) < pagesCount - 1 ? \n\t\t\tthis.state.page + visibleRadius - 1 : pagesCount - 2;\n\n\t\tthis.pagination.push(\n\t\t\t<Pagination.Prev key=\"pagination-prev\" onClick={() => this.changePage(this.state.page - 1)} />\n\t\t);\n\t\tif (pagesCount > 0)\n\t\t\tthis.pagination.push(\n\t\t\t\tthis.getPaginationItem(0)\n\t\t\t);\n\t\tif (from > 1)\n\t\t\tthis.pagination.push(\n\t\t\t\t<Pagination.Ellipsis key=\"pagination-before\" />\n\t\t\t);\n\n\t\tfor (let i = from; i <= to; ++i)\n\t\t{\n\t\t\tthis.pagination.push(\n\t\t\t\tthis.getPaginationItem(i)\n\t\t\t);\n\t\t}\n\n\t\tif (pagesCount - to - 1 > 1)\n\t\t\tthis.pagination.push(\n\t\t\t\t<Pagination.Ellipsis key=\"pagination-after\" />\n\t\t\t);\n\t\tif (pagesCount > 1)\n\t\t\tthis.pagination.push(\n\t\t\t\tthis.getPaginationItem(pagesCount - 1.0)\n\t\t\t);\n\t\tthis.pagination.push(\n\t\t\t<Pagination.Next key=\"pagination-next\" onClick={() => this.changePage(this.state.page + 1)} />\n\t\t);\n\t}\n\n\tgetPaginationItem(page)\n\t{\n\t\treturn (\n\t\t\t<Pagination.Item key={page + 1} active={page + 1 === this.state.page} onClick={() => this.changePage(page + 1)}>\n\t\t\t\t{page + 1}\n\t\t\t</Pagination.Item>\n\t\t);\n\t}\n\n\trender()\n\t{\n\t\tthis.updatePagination();\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Table \n\t\t\t\t\tstriped\n\t\t\t\t\tbordered\n\t\t\t\t\tresponsive\n\t\t\t\t\tclassName=\"mt-3\"\n\t\t\t\t>\n\t\t\t\t\t{this.props.headers?.length ? (\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>#</th>\n\t\t\t\t\t\t\t\t{this.props.headers.map(header => <th key={ header.label }>{ header.label }</th>)}\n\t\t\t\t\t\t\t</tr>\t\t\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t!this.props.items?.length ? (\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td colSpan={ this.props.headers.length + 1 } className=\"text-center\">\n\t\t\t\t\t\t\t\t\t\tНет данных\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.items?.filter((_, index) => {\n\t\t\t\t\t\t\t\treturn\tindex >= (this.state.page - 1) * this.state.pageSize &&\n\t\t\t\t\t\t\t\t\t\tindex < this.state.page * this.state.pageSize;\n\t\t\t\t\t\t\t}).map((item, index) =>\n\t\t\t\t\t\t\t\t<tr key={`tr-${index + 1}`}>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{ (this.state.page - 1) * this.state.pageSize + index + 1 }\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t{this.props.headers.map(header => \n\t\t\t\t\t\t\t\t\t\t<td key={`td-${index + 1}-${header.name}`}>\n\t\t\t\t\t\t\t\t\t\t\t{ item[header.name] }\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\t\n\t\t\t\t\t</tbody>\n\t\t\t\t</Table>\n\t\t\t\t<Pagination>\n\t\t\t\t\t{ this.pagination }\n\t\t\t\t</Pagination>\n\t\t\t</>\n\t\t)\n\t}\n};\n\nexport default InfoTable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}