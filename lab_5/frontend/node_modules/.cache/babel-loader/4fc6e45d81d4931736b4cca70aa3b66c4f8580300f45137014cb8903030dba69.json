{"ast":null,"code":"var _jsxFileName = \"/home/mikeasta/Programming/lr5_egor/lr5/frontend/src/components/broker/BrokerList.js\";\nimport React from \"react\";\nimport Broker from \"./Broker\";\nimport { ListGroup, Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport BrokerInfo from \"./BrokerInfo\";\nimport clientSocket from \"../../settings/socket\";\nimport { setBrokers } from \"../../actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass BrokerList extends React.Component {\n  constructor(props) {\n    super(props);\n    if (!this.props.brokers.length) clientSocket.emit(\"brokers\");\n    clientSocket.on(\"brokers\", brokers => this.props.dataChanged(brokers));\n    this.state = {\n      showModal: false,\n      active: -1\n    };\n    this.openModal = this.openModal.bind(this);\n    this.hideModal = this.hideModal.bind(this);\n  }\n  openModal() {\n    let id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : -1;\n    this.setState({\n      showModal: true,\n      active: id\n    });\n  }\n  hideModal() {\n    this.setState({\n      showModal: false\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => this.openModal(),\n        variant: \"success\",\n        className: \"mb-1\",\n        children: \"Add broker\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n        as: \"ol\",\n        numbered: true,\n        children: this.props.brokers.map(broker => /*#__PURE__*/_jsxDEV(Broker, {\n          ...broker,\n          onClick: () => this.openModal(broker.id),\n          onRemove: event => this.props.onRemove(event, broker.id)\n        }, broker.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 8\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(BrokerInfo, {\n        active: this.state.active,\n        show: this.state.showModal,\n        hide: this.hideModal,\n        onSubmit: this.props.onSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 4\n    }, this);\n  }\n}\n;\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  brokers: state.brokers\n});\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  dataChanged: data => dispatch(setBrokers(data)),\n  onSubmit: (event, id) => {\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const data = {};\n    for (let entry of formData.entries()) data[entry[0]] = entry[1];\n    data.id = id;\n    clientSocket.emit(\"updateBroker\", data);\n  },\n  onRemove: (event, id) => {\n    event.preventDefault();\n    if (window.confirm(\"Are you sure you want to delete the broker\")) clientSocket.emit(\"removeBroker\", id);\n  }\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(BrokerList);","map":{"version":3,"names":["React","Broker","ListGroup","Button","connect","BrokerInfo","clientSocket","setBrokers","BrokerList","Component","constructor","props","brokers","length","emit","on","dataChanged","state","showModal","active","openModal","bind","hideModal","id","setState","render","map","broker","event","onRemove","onSubmit","mapStateToProps","ownProps","mapDispatchToProps","dispatch","data","preventDefault","formData","FormData","target","entry","entries","window","confirm"],"sources":["/home/mikeasta/Programming/lr5_egor/lr5/frontend/src/components/broker/BrokerList.js"],"sourcesContent":["import React from \"react\";\nimport Broker from \"./Broker\";\nimport { ListGroup, Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport BrokerInfo from \"./BrokerInfo\";\nimport clientSocket from \"../../settings/socket\";\nimport { \n\tsetBrokers \n} from \"../../actions\";\n\nclass BrokerList extends React.Component\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tif (!this.props.brokers.length)\n\t\t\tclientSocket.emit(\"brokers\");\n\t\tclientSocket.on(\"brokers\", brokers => this.props.dataChanged(brokers));\n\n\t\tthis.state = { \n\t\t\tshowModal: false,\n\t\t\tactive: -1\n\t\t};\n\t\tthis.openModal = this.openModal.bind(this);\n\t\tthis.hideModal = this.hideModal.bind(this);\n\t}\n\n\topenModal(id = -1)\n\t{\n\t\tthis.setState({\n\t\t\tshowModal: true,\n\t\t\tactive: id\n\t\t});\n\t}\n\n\thideModal()\n\t{\n\t\tthis.setState({showModal: false});\n\t}\n\n\trender()\n\t{\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Button \n\t\t\t\t\tonClick={() => this.openModal()} \n\t\t\t\t\tvariant=\"success\" \n\t\t\t\t\tclassName=\"mb-1\"\n\t\t\t\t>Add broker</Button>\n\t\t\t\t<ListGroup as=\"ol\" numbered>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.brokers.map(broker => \n\t\t\t\t\t\t\t<Broker \n\t\t\t\t\t\t\t\tkey={broker.id}\n\t\t\t\t\t\t\t\t{...broker}\n\t\t\t\t\t\t\t\tonClick={() => this.openModal(broker.id)}\n\t\t\t\t\t\t\t\tonRemove={(event) => this.props.onRemove(\n\t\t\t\t\t\t\t\t\tevent, broker.id\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</ListGroup>\n\t\t\t\t<BrokerInfo \n\t\t\t\t\tactive={this.state.active}\n\t\t\t\t\tshow={this.state.showModal}\n\t\t\t\t\thide={this.hideModal}\n\t\t\t\t\tonSubmit={this.props.onSubmit}\n\t\t\t\t/>\n\t\t\t</div>\t\n\t\t);\n\t}\n};\n\nconst mapStateToProps = (state, ownProps) => ({ \n\t...ownProps,\n\tbrokers: state.brokers\n});\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n\tdataChanged: data => dispatch(setBrokers(data)),\n\tonSubmit: (event, id) => {\n\t\tevent.preventDefault();\n\t\tconst formData = new FormData(event.target);\n\t\tconst data = {};\n\t\tfor (let entry of formData.entries())\n\t\t\tdata[entry[0]] = entry[1];\n\t\tdata.id = id;\n\t\tclientSocket.emit(\"updateBroker\", data);\n\t},\n\tonRemove: (event, id) => {\n\t\tevent.preventDefault();\n\t\tif (window.confirm(\"Are you sure you want to delete the broker\"))\n\t\t\tclientSocket.emit(\"removeBroker\", id);\n\t}\n});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(BrokerList);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}