{"ast":null,"code":"var _jsxFileName = \"/home/mikeasta/Programming/lr5_egor/lr5/frontend/src/components/stock/StockList.js\";\nimport React from \"react\";\nimport Stock from \"./Stock\";\nimport StockInfo from \"./StockInfo\";\nimport { ListGroup } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport clientSocket from \"../../settings/socket.js\";\nimport { setStocks, addStockToEmulation, removeStockFromEmulation, setOptions } from \"../../actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass StockList extends React.Component {\n  constructor(props) {\n    var _this$props$settings, _this$props$settings2;\n    super(props);\n    if (!((_this$props$settings = this.props.settings) !== null && _this$props$settings !== void 0 && _this$props$settings.emulatedStocks.length) && !((_this$props$settings2 = this.props.settings) !== null && _this$props$settings2 !== void 0 && _this$props$settings2.updateRate)) clientSocket.emit(\"getSettings\");\n    clientSocket.on(\"getSettings\", data => this.props.optionsChanged(data));\n    if (!this.props.stocks.length) clientSocket.emit(\"stocks\");\n    clientSocket.on(\"stocks\", stocks => this.props.dataChanged(stocks));\n    this.state = {\n      showModal: false,\n      active: -1\n    };\n    this.openModal = this.openModal.bind(this);\n    this.hideModal = this.hideModal.bind(this);\n  }\n  openModal() {\n    let id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : -1;\n    this.setState({\n      showModal: true,\n      active: id\n    });\n  }\n  hideModal() {\n    this.setState({\n      showModal: false\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(ListGroup, {\n        as: \"ol\",\n        numbered: true,\n        children: this.props.stocks.map(stock => {\n          var _this$props$emulated;\n          return /*#__PURE__*/_jsxDEV(Stock, {\n            ...stock,\n            onRemove: this.props.onRemove,\n            onAdd: this.props.onAdd,\n            onClick: () => this.openModal(stock.id),\n            isEmulated: !!((_this$props$emulated = this.props.emulated) !== null && _this$props$emulated !== void 0 && _this$props$emulated.find(emulated => emulated === stock.id))\n          }, stock.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 7\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(StockInfo, {\n        activeStock: this.state.active,\n        show: this.state.showModal,\n        hide: this.hideModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this);\n  }\n}\n;\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  stocks: state.stocks,\n  settings: state.settings,\n  emulated: state.settings.emulatedStocks\n});\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  dataChanged: data => dispatch(setStocks(data)),\n  optionsChanged: settings => dispatch(setOptions(settings)),\n  onRemove: (event, id) => {\n    event.preventDefault();\n    dispatch(removeStockFromEmulation(id));\n  },\n  onAdd: (event, id) => {\n    event.preventDefault();\n    dispatch(addStockToEmulation(id));\n  }\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(StockList);","map":{"version":3,"names":["React","Stock","StockInfo","ListGroup","connect","clientSocket","setStocks","addStockToEmulation","removeStockFromEmulation","setOptions","StockList","Component","constructor","props","settings","emulatedStocks","length","updateRate","emit","on","data","optionsChanged","stocks","dataChanged","state","showModal","active","openModal","bind","hideModal","id","setState","render","map","stock","onRemove","onAdd","emulated","find","mapStateToProps","ownProps","mapDispatchToProps","dispatch","event","preventDefault"],"sources":["/home/mikeasta/Programming/lr5_egor/lr5/frontend/src/components/stock/StockList.js"],"sourcesContent":["import React from \"react\";\nimport Stock from \"./Stock\";\nimport StockInfo from \"./StockInfo\";\nimport { ListGroup } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport clientSocket from \"../../settings/socket.js\";\nimport { \n\tsetStocks, \n\taddStockToEmulation, \n\tremoveStockFromEmulation,\n\tsetOptions\n} from \"../../actions\";\n\nclass StockList extends React.Component\n{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\n\t\tif (\n\t\t\t!this.props.settings?.emulatedStocks.length && \n\t\t\t!this.props.settings?.updateRate\n\t\t)\n\t\t\tclientSocket.emit(\"getSettings\");\n\t\tclientSocket.on(\"getSettings\", data => this.props.optionsChanged(data));\n\t\tif (!this.props.stocks.length)\n\t\t\tclientSocket.emit(\"stocks\");\n\t\tclientSocket.on(\"stocks\", stocks => this.props.dataChanged(stocks));\n\n\t\tthis.state = { \n\t\t\tshowModal: false,\n\t\t\tactive: -1\n\t\t};\n\t\tthis.openModal = this.openModal.bind(this);\n\t\tthis.hideModal = this.hideModal.bind(this);\n\t}\n\n\topenModal(id = -1)\n\t{\n\t\tthis.setState({\n\t\t\tshowModal: true,\n\t\t\tactive: id\n\t\t});\n\t}\n\n\thideModal()\n\t{\n\t\tthis.setState({showModal: false});\n\t}\n\n\trender()\n\t{\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<ListGroup as=\"ol\" numbered>\n\t\t\t\t\t{this.props.stocks.map(stock => \n\t\t\t\t\t\t<Stock \n\t\t\t\t\t\t\tkey={stock.id}\n\t\t\t\t\t\t\t{...stock}\n\t\t\t\t\t\t\tonRemove={this.props.onRemove}\n\t\t\t\t\t\t\tonAdd={this.props.onAdd}\n\t\t\t\t\t\t\tonClick={() => this.openModal(stock.id)}\n\t\t\t\t\t\t\tisEmulated={!!this.props.emulated?.find(\n\t\t\t\t\t\t\t\temulated => emulated === stock.id\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</ListGroup>\n\t\t\t\t<StockInfo \n\t\t\t\t\tactiveStock={this.state.active}\n\t\t\t\t\tshow={this.state.showModal}\n\t\t\t\t\thide={this.hideModal}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n};\n\nconst mapStateToProps = (state, ownProps) => ({ \n\t...ownProps,\n\tstocks: state.stocks,\n\tsettings: state.settings,\n\temulated: state.settings.emulatedStocks\n});\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n\tdataChanged: data => dispatch(setStocks(data)),\n\toptionsChanged: settings => dispatch(setOptions(settings)),\n\tonRemove: (event, id) => {\n\t\tevent.preventDefault();\n\t\tdispatch(removeStockFromEmulation(id));\n\t},\n\tonAdd: (event, id) => {\n\t\tevent.preventDefault();\n\t\tdispatch(addStockToEmulation(id));\n\t}\n});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(StockList);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}